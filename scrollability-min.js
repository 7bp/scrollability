/* See LICENSE for terms of usage */(function(){function L(b){var c=b.parentNode;return{node:b,scrollbar:I(b),min:-c.scrollHeight+c.offsetHeight,max:0,viewport:c.offsetHeight,bounce:c.offsetHeight*e,constrained:!0,delegate:b.scrollDelegate,filter:function(a,b){return b},disable:function(b,c,d,e){var f=Math.abs(b-d),g=Math.abs(c-e);if(f>g&&f>a)return!0},update:function(a,b){H(a,a.scrollable_horizontal||0,b)}}}function K(b){var c=b.parentNode;return{node:b,min:-c.scrollWidth+c.offsetWidth,max:0,viewport:c.offsetWidth,bounce:c.offsetWidth*e,constrained:!0,delegate:b.scrollDelegate,filter:function(a,b){return a},disable:function(b,c,d,e){var f=Math.abs(b-d),g=Math.abs(c-e);if(g>f&&g>a)return!0},update:function(a,b){H(a,b,a.scrollable_vertical||0)}}}function J(a,b,c,d){return a==d?b+c:c*(-Math.pow(2,-10*a/d)+1)+b}function I(a){if(!a.scrollableScrollbar){var b=a.scrollableScrollbar=document.createElement("div");b.className="scrollableScrollbar",b.style.cssText=["position: absolute","top: 0","right: 1px","width: 5px","min-height: 5px","background: rgba(40, 40, 40, 0.8)","border: 1px solid rgba(220, 220, 220, 0.35)","opacity: 0","-webkit-border-radius: 3px 3px","-webkit-transform: translate3d(0,0,0)","-webkit-transition: opacity 0.15s linear","z-index: 2147483647"].join(";")}return a.scrollableScrollbar}function H(a,b,c){l?a.style.webkitTransform="translate3d("+(b?b+"px":"0")+","+(c?c+"px":"0")+","+"0)":m&&(a.style.MozTransform="translate("+(b?b+"px":"0")+","+(c?c+"px":"0")+")")}function G(){if(u){clearInterval(u),u=0;for(var a=0;a<v.length;++a){var b=v[a];b.terminator()}v=[]}}function F(a){for(var b=0;b<a.length;++b){var c=a[b];c.className=c.className.replace("touched","")}}function E(a){var b=[];for(var c=a;c;c=c.parentNode)c.nodeType==1&&(c.className=(c.className?c.className+" ":"")+"touched",b.push(c));return b}function D(a,b){while(a){if(a.nodeType==1){var c=a.className.split(" ");if(c.indexOf("scrollable")!=-1){var d=c.indexOf("paginated")!=-1;for(var e=0;e<c.length;++e){var f=c[e];if(w[f]){var g=w[f](a);g.key="scrollable_"+f,g.paginated=d,g.key in a||(a[g.key]=g.initial?g.initial(a):0);var h=!1;for(var i=0;i<b.length;++i)if(b[i].node==g.node){h=!0;break}h||b.push(g)}}if(c.indexOf("exclusive")!=-1)break}}a=a.parentNode}}function C(a){var b=[];D(a,b);var c=document.querySelectorAll(".scrollable.global");for(var d=0;d<c.length;++d)D(c[d],b);return b}function B(){var a=(new Date).getTime();for(var b=0;b<v.length;++b){var c=v[b],d=c.filter(p,q);c.animator(d,a)||(c.terminator(),v.splice(b--,1))}v.length||G()}function A(e,k,l,m){function U(){if(p){var a=Math.round(u/q);T(a*(q+z))}else u>w&&o?T(w):u<v&&o&&T(v);t&&(t.style.opacity="0",t.style.webkitTransition="opacity 0.2s linear"),n&&n.onEndScroll&&n.onEndScroll()}function T(a,b){u=a,e.node[e.key]=u,e.update(e.node,u),n&&n.onScroll&&n.onScroll(u);var c=-v-w;if(t&&q<c){var d=q-j*4,f=d/c*d,g=0;u>w?(f=Math.max(f-(u-w),5),g=0):u<v?(f=Math.max(f-(v-u),5),g=d-f):g=Math.round(Math.abs(u)/c*(d-f)),g+=j,t.style.height=Math.round(f)+"px",H(t,0,Math.round(g)),s&&(t.style.opacity="1",t.style.webkitTransition="none")}return b}function S(h,j){var k=1/(j-I);I=j;var l=!0;if(r){var m=(h-G)*b;if(!m){K||(K=j);if(j-K<L)return!0}else K=0;!N&&Math.abs(h-startTouch)>a&&(N=!0,n&&n.onLockScroll&&n.onLockScroll(e.key)),G=h,A=m/k;if(u>w&&o){var s=u-w;A*=1-s/E}else if(u<v&&o){var s=v-u;A*=1-s/E}}else{if(p&&!M){M=!0;if(Math.abs(u-w)>F||Math.abs(A)>i)if(u>w){if(w!=y){w+=q+z,v+=q+z;if(n&&n.onScrollPage){var t=v%q,H=-Math.round((u+q-t)/q);n.onScrollPage(H,-1)}}}else if(v!=x){w-=q+z,v-=q+z;if(n&&n.onScrollPage){var t=v%q,H=-Math.round((u-q-t)/q);n.onScrollPage(H,1)}}}if(u>w&&o){if(!(A>0)){B||(C=u,D=w-u),u=J(B,C,D,g);return T(u,++B<=g&&Math.floor(u)>w)}var s=u-w,O=1-s/E;A=Math.max(A-f*k,0)*O,B=0}else if(u<v&&o){if(!(A<0)){B||(C=u,D=v-u),u=J(B,C,D,g);return T(u,++B<=g&&Math.ceil(u)<v)}var s=v-u,O=1-s/E;A=Math.min(A+f*k,0)*O,B=0}else{B||(A<0&&A<-c?A=-c:A>0&&A>c&&(A=c),C=A),A=J(B,C,-C,d);if(++B>d||Math.floor(A)==0)l=!1}}u+=A*k;return T(u,l)}var n=e.delegate,o=e.constrained,p=e.paginated,q=e.viewport||0,t=e.scrollbar,u=e.node[e.key],v=e.min,w=e.max,x=v,y=Math.round(w/q)*q,z=0,A=0,B=0,C,D,E=e.bounce,F=q*h,G=startTouch=e.filter(k,l),I=m,K=0,L=20,M=!1,N=!1;if(p){var O=Math.round(Math.abs(x)%q),P=(Math.abs(x)-O)/q+1,z=O/P,Q=Math.round(u)%q,R=Math.round((u-Q)/q)*q;v=w=Math.round(R+y)+Q,x+=z}if(n&&n.onStartScroll&&!n.onStartScroll())return null;t&&e.node.parentNode.appendChild(t);return{node:e.node,filter:e.filter,disable:e.disable,animator:S,terminator:U}}function z(a){function l(a){f&&(clearTimeout(f),f=0);if(d){var b=document.createEvent("MouseEvents");b.initMouseEvent("click",!0,!0,window,1),d[0].dispatchEvent(b),F(d)}j.removeEventListener("touchmove",k,!1),j.removeEventListener("touchend",l,!1),r=!1}function k(a){a.preventDefault(),s=!0,f&&(clearTimeout(f),f=0),d&&(F(d),d=null);var b=a.touches[0];p=b.clientX,q=b.clientY;if(v.length>1)for(var c=0;c<v.length;++c){var e=v[c];if(e.disable&&e.disable(p,q,n,o)){e.terminator(),v.splice(c,1);break}}}var b=a.touches[0],c=C(a.target);if(!c.length&&!scrollability.globalScrolling)return!0;var d=null,e=a.target,f=setTimeout(function(){f=0,d=E(e)},50);G(),p=n=b.clientX,q=o=b.clientY,r=!0,s=!1,v=[];var g=(new Date).getTime();for(var h=0;h<c.length;++h){var i=A(c[h],p,q,g);i&&v.push(i)}u=setInterval(B,0);var j=document;j.addEventListener("touchmove",k,!1),j.addEventListener("touchend",l,!1)}function y(a){t=!0}function x(a){setTimeout(function(){if(t)t=!1;else{var a=document.getElementsByClassName("scrollable");if(a.length){var b=a[0];b.className.indexOf("vertical")!=-1&&scrollability.scrollTo(b,0,0,k)}}})}var a=10,b=1,c=720/(window.devicePixelRatio||1),d=350,e=.5,f=600,g=90,h=.3,i=50,j=1,k=20,l="webkitTransform"in document.documentElement.style,m="MozTransform"in document.documentElement.style,n,o,p,q,r,s,t,u=0,v=[],w={horizontal:K,vertical:L};window.scrollability={globalScrolling:!1,scrollers:w,scrollTo:function(a,b,c,d){var e=0;G();if(d){var f=a.scrollable_horizontal||0,g=a.scrollable_vertical||0;u=setInterval(function(){var h=a.scrollable_horizontal=J(e,f,b-f,d),i=a.scrollable_vertical=J(e,g,c-g,d);H(a,h,i),++e==d&&(G(),H(a,b,c))},20)}else a.scrollable_horizontal=b,a.scrollable_vertical=c,H(a,b,c)}},document.addEventListener("touchstart",z,!1),document.addEventListener("scroll",x,!1),document.addEventListener("orientationchange",y,!1)})()